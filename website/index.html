<!DOCTYPE html>
<html lang="ja"><head>
<meta charset="UTF-8">
<meta name="description" content="Playstation2版 機動戦士ガンダム ガンダムvs.Zガンダム の非公式通信対サーバです。">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="/static/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/css/style.css" rel="stylesheet">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file -->
<!--[if lt IE 9]>
  <script src="httpsoss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="httpsoss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<title>ガンダムvs.Zガンダム 非公式通信対戦サーバ</title>
</head>
<body>

<div class="jumbotron">
<div class="container">
<h1>zdxsv.net</h1>
<p>ガンダムvs.Zガンダム 非公式通信対戦サーバ</p>
</div>
</div>

<div class="btn-group btn-group-justified links">
  <a href="#top" class="btn btn-default" data-toggle="tab">トップ</a>
  <a href="#guide" class="btn btn-default" data-toggle="tab">接続方法</a>
  <a href="#zproxy" class="btn btn-default" data-toggle="tab">UDPプロキシ</a>
  <a href="//discordapp.com/channels/142729493566586880/142729493566586880" target="_blank" class="btn btn-default">Discord</a>
</div>

<div class="container main-contents">
<div class="row">

<div class="col-sm-8">
<div class="tab-content">
<div class="tab-pane active" id="top">
  <h2>基本情報</h2>
  <p>Playstation2版 機動戦士ガンダム ガンダムvs.Zガンダム の非公式通信対戦サーバです。</p>
  <p class="danger">※公式の通信対戦サービスは2011年6月30日に終了しています。非公式サーバに関するお問い合わせは絶対しないでください。 </p>
  <p>接続方法については <a href=#guide data-toggle="tab">接続方法</a> をご覧ください。</p>
  <p>Discordのチャットグループを作成しました。使い方は <a href="//eeharumt.github.io/how2usediscordjp/basicoperation.html">こちら</a> を参考にしてください。</p>

  <h2>更新情報</h2>
  <ul>
  <li>2019/10/13 HTTPSに対応し掲示板へのリンクを破棄しました</li>
  <li>2016/09/28 ドメインを取得しサイトをリニューアルしました</li>
  <li>2016/02/13 プログラムを一新しました UDPプロキシ最新版を使用してください</li>
  <li>2015/03/29 対戦サーバがUDPに対応版になりました</li>
  <li>2014/05/15 部屋が作成可能になりました</li>
  <li>2014/05/02 接続状況をwebから確認できる機能を追加しました</li>
  <li>2014/04/06 自動選抜に入った順番に1P-4Pにならない問題を修正</li>
  <li>2014/04/06 チャット時に一部の特殊文字を使用するとフリーズする問題を修正しました</li>
  <li>2014/04/02 作戦後部屋が使用可能になりました</li>
  <li>2014/03/31 右スティックメッセージが使用可能になりました</li>
  <li>2014/03/30 部隊名 パイロット名が反映されない不具合を修正しました</li>
  <li>2014/03/27 おすすめ機材 ページを追加しました</li>
  <li>2014/03/17 掲示板を開設しました 気軽にご利用ください</li>
  <li>2014/03/11 ２組以上の同時対戦で通信が重くなる問題を暫定対応しました</li>
  <li>2014/03/10 オープンβを開始しました</li>
  </ul>
</div>  <!-- end of top -->

<div class="tab-pane" id="guide">
  <h2>接続方法</h2>
  <h3>必要なもの</h3>
  <ul>
  <li>PlayStation2本体 又は 初期型PlayStation3本体</li>
  <li>PlayStation2版 機動戦士ガンダム ガンダムvs.Zガンダム</li>
  <li>メモリーカード</li>
  <li>コントローラ</li>
  <li>ネットワークアダプタ(薄型本体なら不要)</li>
  </ul>

  <h3>接続設定</h3>
  <ul>
	<li>PlayStation2とルータをLANケーブルで接続しゲームを起動</li>
	<li>通信対戦 &gt; ブロードバンド接続 &gt; ネットワーク接続 &gt; ネットワーク設定の編集 を選択</li>
	<li>環境に応じて設定を作成する 基本は「自動設定する」でOK</li>
	<li>DNSサーバの設定で「自動設定しない」を選択</li>
	<li>プライマリDNSに <span class="danger">153.121.44.150</span> を入力 セカンダリDNSは 0.0.0.0 でOK</li>
	<li>設定を保存</li>
	<li>通信対戦 &gt; ブロードバンド接続 &gt; ネットワーク接続</li>
	<li>上で作った設定を選択</li>
	<li>サーバTOPが表示されたら成功</li>
  </ul>

  <h3>登録・ログイン</h3>
  <ul>
	<li>注意事項を熟読</li>
	<li>「新規登録」を選択 (初回のみ)</li>
	<li>「ログインIDとパスワードを記録する」を選択</li>
	<li>サーバTOPに戻り「ログイン」を選択 (2回目以降はそのままログインでOK)</li>
	<li>カプコンユーザ登録/変更は「登録しない」を選択</li>
	<li>HNを決定し戦場選択画面へ</li>
  </ul>
</div>  <!-- end of guide -->

<div class="tab-pane" id="zproxy">
  <h2>UDPプロキシ</h2>
  <h3>概要</h3>
  <p>対戦中の通信方式を変換することによって、対戦中のラグを軽減します。</p>
  <p>対戦中の通信は、TCPという通信方式が使われています。TCPは高機能ですが、ゲームのようなリアルタイム通信には向いていません。</p>
  <p>UDPという低機能でリアルタイムな通信に向いている通信方式に変換することで、ラグを軽減することができます。 変換は間にPCを挟んで行います。</p>
  <pre>接続イメージ
従来：[PS2] -----(TCP)----- [対戦サーバ]
変換：[PS2] -----(TCP)----- [PC]-----(UDP)-----[対戦サーバ]</pre>

  <h3>必要なもの</h3>
  <ul>
  <li>PS2と同じネットワーク(ルータ)に接続しているPC(有線接続推奨)</li>
  <li>プロキシソフト <a href="//dl.equinox.io/mecha_g3/zproxy/stable">ダウンロード</a></li>
  </ul>

  <h3>使い方</h3>
  <ul>
	<li>サーバにログインしてロビーに接続しておきます</li>
	<li>PCでプロキシソフトを起動し、登録ボタンを押します</li>
	<li>プロキシソフトの画面に「登録成功 &lt;ログインしているZのユーザID&gt;」が表示されればOK</li>
	<li>初めての場合は接続テストを行ってください</li>
	<li>対戦中にPCがスリープや再起動しないようにしておいてください</li>
  </ul>

  <h3>接続テスト</h3>
  <ul>
	<li>UDPプロキシをつけた状態で、ケネディポートのロビー自動選抜に参加すると、PC-PS2間の接続テストができます</li>
	<li>一人対戦が始まれば、テストは成功です</li>
  </ul>

  <h3>アンチウイルスソフトの例外設定</h3>
  <p>接続テストが上手く行かない場合、アンチウイルスソフトによって通信がブロックされている可能性があります。</p>
  <p>zproxyを例外ソフトとして登録することで回避ができます。 やり方は各アンチウイルスソフトごとに異なるので、設定の仕方を調べてください。</p>
  <p>参考:<a href="//www.maru-jan.com/guide/security/">セキュリティソフトの設定 | オンライン麻雀 Maru-Jan 公式サイト</a>

  <h3>初回起動時の注意(Windows)</h3>
  <p class="danger">※他のアプリケーションで安全であるかわからない場合には、実行しないようにしましょう。</p>
  <p>起動時に以下のような警告が出た場合、詳細情報をクリックし、実行を押します。</p>
	<div class="row">
	<div class="col-sm-6"><img src="/static/img/win1.png" alt="警告例1" class="img-thumbnail"></div>
  <div class="col-sm-6"><img src="/static/img/win2.png" alt="警告例2" class="img-thumbnail"></div>
	</div>
  <p>セキュリティの警告が出た場合、赤枠のところにもチェックを入れて、アクセスを許可するを選択してください。</p>
	<img src="/static/img/win3.png" alt="警告例1" class="img-thumbnail">

</div>  <!-- end of zproxy -->

</div>  <!-- end of tab-content -->
</div>  <!-- end of col  -->

<div class="col-sm-4">
<div class="panel">
  <div class="panel-heading">接続情報</div>
  <div class="panel-body">
    <p id="stat-updated">取得中</p>
    <p id="lobby-user-count"></p>
    <table class="table mini-font mini-table table-inverse" id="lobby-users-table"></table>
    <p id="battle-user-count"></p>
    <table class="table mini-font mini-table table-inverse" id="battle-users-table"></table>
  </div>
</div>  <!-- end of panel -->
</div>  <!-- end of col  -->

</div>  <!-- end of row -->
</div>  <!-- end of main-contents -->

<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script>
$(function() {
function updateOnlineUser(t, u) {
  while(0 < t.rows.length) t.deleteRow(-1)
  if (!u) return
  for (var i = 0; i < u.length; i++) {
    var r = t.insertRow(-1);
    var uid = r.insertCell(0)
    uid.innerHTML = "【" + u[i].UserId+ "】"
    uid.className = "z-user-id"
    var uname = r.insertCell(1)
    uname.innerHTML = u[i].Name
    uname.className = "z-user-name"
    r.insertCell(2).innerHTML = u[i].UDP ? '<span class="label label-primary">UDP</span>' : ""
  }
}
function updateChatUser(t, u) {
  while(0 < t.rows.length) t.deleteRow(-1)
  if (!u) return
  u.sort(function(a, b) {
    if(a.id < b.id) return -1
    if(a.id > b.id) return 1
    return 0
  })
  for (var i = 0; i < u.length; i++) {
    var r = t.insertRow(-1);
    var c = r.insertCell(0)
    var id = u[i].ID || u[i].id
    var av = u[i].Avatar || u[i].avatar
    var vc = u[i].VoiceChat || u[i].voice_chat
    var un = u[i].Username || u[i].username
    un = $(c).text(un).text()
    c.innerHTML = ''
    if (vc) c.innerHTML += '<span class="glyphicon glyphicon-volume-up" style="color:green"></span>'
    else c.innerHTML += '<span class="glyphicon glyphicon-volume-off" style="color:gray"></span>'
    if (av) c.innerHTML += '<img class="img-rounded" width="30" height="30" src="//cdn.discordapp.com/avatars/' + encodeURIComponent(id) + '/' + encodeURIComponent(av) + '.jpg">'
    else c.innerHTML += '<img class="img-rounded" width="30" height="30" src="/static/img/discord.png">'
    c.innerHTML += un
  }
}
function pollStat(){
  $.ajax({url: '/api/stat', type: 'GET', dataType: 'json'}).done(function(res) {
    document.getElementById("stat-updated").innerHTML = res.NowDate + "現在"
    document.getElementById("lobby-user-count").innerHTML = "ロビー " + res.LobbyUsers.length + " 人"
    document.getElementById("battle-user-count").innerHTML = "対戦中 " + res.BattleUsers.length + " 人"
    updateOnlineUser(document.getElementById("lobby-users-table"), res.LobbyUsers)
    updateOnlineUser(document.getElementById("battle-users-table"), res.BattleUsers)
  });
}
pollStat();
setInterval(pollStat, 30 * 1000);
})
</script>
</body></html>
